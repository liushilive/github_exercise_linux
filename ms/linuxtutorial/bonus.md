# 奖金材料！
在本节中，我将介绍一些Linux命令和概念。这些对于使用命令行不是必不可少的，但对于那些想要进一步处理的人来说非常有用。它们将让你感受到Linux可以执行的一些更强大的功能。我不打算详细介绍这些内容。只会有一个简短的描述和一些示例用法。足以让你了解它的作用以及如何开始修补。如果你正在玩这些东西，那么我认为你可能已经有足够的理解和能力将它作为首发，并通过阅读手册，试验和对谷歌进行进一步的研究来自己解决问题。探索，玩得开心！

Cron - 任务调度
Cron代表Command Run ON。它是一种允许你在特定时间告诉系统运行某些命令的机制。因此，例如，我可以制作一个脚本来检查保存主目录的磁盘上剩余多少空间，如果可用磁盘空间低于一定数量，则向某些人发送电子邮件。然后我会使用cron让这个脚本每小时自动运行一次。

Cron允许在计划运行命令时进行相当多的控制。像Linux中的大多数东西一样，它通过文本文件进行管理。文本文件的布局可能有点令人生畏，但是一旦掌握了它，就不会那么糟糕。有很多网站都有很好的参考，也很容易。

管理cron的文件称为crontab。每个用户可以拥有自己的crontab，其中每行代表一个特定命令的时间表，如下所示：

* * * * *执行命令

*代表的地方（按从左到右的顺序：

分钟（0 - 59）
小时（0-23）
每月的一天（1 - 31）
几个月（1 - 12）
星期几（0 - 7）（0和7是星期日）
任何这些地方的A *表示这些增量中的每一个。

一些例子：

* * * * * /bin/myscript.sh

每分钟执行一次myscript.sh。

30 3 * * 4 /bin/myscript.sh

每周四凌晨3:30执行myscript.sh。

要查看当前已安排的任务列表，可以运行以下命令：

crontab -l

要编辑计划任务，请运行以下命令。它将在你的默认文本编辑器中打开，通常是Vim。

crontab -e

xargs的
Xargs是一个有用的工具，可以为列表中的每个项目运行特定命令。这有点难以解释，因此演示可能是说明其用法的最简单方法。

假设我们在目录中有一系列图像，并且它们以大写扩展名命名。我们希望它们都是小写而不是一致性。

LS
image1.JPG image2.JPG image3.JPG image4.jpg
basename -s .JPG -a * .JPG | xargs -n1 -i mv {} .JPG {} .jpg
LS
image1.jpg image2.jpg image3.jpg image4.jpg
让我们分解一下：

第1行 - 运行ls以查看当前情况。
第4行 - 现在是魔术。它有点复杂，所以让我们再次分解它：
首先我们使用命令basename。此命令允许我们获取删除后缀的名称。
-s选项允许我们指定应删除的后缀。
-a选项允许我们指定多个文件。Basename是默认情况下不支持多个文件的少数几个命令之一。
这将为我们提供一个要重命名的文件的列表，但删除了.JPG后缀。
现在我们将该列表输入到命令xargs中。
第一个选项-n1规定对于通过管道传入的每个项目，应该执行一次下一个命令。
-i表示我们将在下一个命令中使用替换字符串（默认为{}）。这意味着，执行下一个命令，用管道中刚刚读取的内容替换{}的每一个出现。
最后，我们指定要执行的命令是mv并相应地填充间隙。
第6行 - 我们再次运行ls只是为了验证它确实按照我们的想法行事。
Xargs有更多可供选择的选择和充足的机会。你经常需要一点创造力和足够的持久性来调整命令直到它工作。

找
Find是一个很好的工具，可以对搜索文件进行细粒度控制。与xargs一样，手册页是发现它们的最佳位置。我将在下面举例说明一个基本示例。这里我们遇到磁盘空间不足的问题所以我们想在用户主目录中搜索超过200mb的文件。

find / home -size + 200M -exec ls -sh {} \;
452M /home/barry/backups/everything.tar.gz
941M /home/lisa/projects/loony/servermigration.tar.gz
768M /home/mark/Documents/gregs_birthday.mpg
...
让我们分解一下：

find是我们正在运行的程序。
/ home是要查找的目录。默认情况下，它是递归搜索。
-size是一个搜索选项。我们在这里说找到任何大小（+）大于200Mb的文件。有许多搜索选项，你可以在此列出任意数量的搜索选项。查找将列出与所有给定搜索选项匹配的所有文件。
-exec告诉find为它找到的每个文件执行以下命令。用{}代替找到的实际文件。我们结束了exec选项; 但我们必须在它前面加一个\来逃避它在命令行上的正常含义。查找将列出在其中找到的文件的正常行为，但我们也有兴趣查看它们的大小，因此我们添加了最后一位以获得更好的输出。
或者也许我们是管理服务器的团队的一员。它今天表现得很奇怪，但我们知道它一直工作到昨天。我们知道服务器的所有配置文件都在/ etc目录中，因此我们怀疑有人可能已经更改了其中一个。让我们进行搜索，找到过去24小时内修改过的目录中的所有文件。

找到/ etc -mtime -1
/ etc / hosts文件
在/etc/resolv.conf
...
柏油
Tar代表Tape ARchive，是将多个文件组合并压缩到单个文件中的常用方法。它最初是为在磁带上进行备份而创建的，但至今仍在使用。即使有其他选项，如压缩ZIP文件，tar仍然很受欢迎，因为它能够存储文件系统信息，如用户和组权限和日期。

下面我将介绍我通常用于创建和提取tar存档的基本表单。Tar有很多选择，所以值得快速浏览手册页。

LS
image1.jpg image2.jpg image3.jpg
tar -zcvf mytar.tar.gz *
image1.jpg
image2.jpg
image3.jpg
LS
image1.jpg image2.jpg image3.jpg mytar.tar.gz
rm * .jpg
LS
mytar.tar.gz
tar -zxvf mytar.tar.gz
image1.jpg
image2.jpg
image3.jpg
LS
image1.jpg image2.jpg image3.jpg mytar.tar.gz
让我们分解一下：

第1行 - 运行ls以查看当前情况。
第4行 - 创建tar存档。 z表示使用gzip压缩生成的文件。c表示我们正在创建一个新档案。v表示详细并要求tar列出它添加到存档的所有文件。最后，f表示结果应该保存到文件中（而不是存储在磁带上）。然后我们指定要创建的文件，然后指定要添加到其中的文件。
第16行 - 这次我们从档案中提取文件，所以用x取代c进行提取，然后关闭。
AWK
如果你需要使用组织成带字段的记录的数据（例如下面的示例数据），awk是一个很好的程序。它允许你过滤数据并控制其显示方式。如果你想知道这个名字，它实际上来自该程序的3位作者的缩写。

像find和xargs一样，它非常强大，但对于大多数人来说，它只是简单的理解非常有用。如果你需要做更复杂的数据修改，awk可以做到这一点，但是一个受欢迎的替代方案是Perl。

cat mysampledata.txt
弗雷德苹果20
苏西橙子5
标记watermellons 12
罗伯特梨4
特里橘子9
丽莎桃子7
Susy oranges 12
标记葡萄39
安妮芒果7
格雷格菠萝3
Oliver rockmellons 2
贝蒂酸橙14
所以我们想说我们只打印出第二列。

awk'{print $ 2}'mysampledata.txt
苹果
桔子
watermellons
梨
桔子
桃子
桔子
葡萄
芒果
菠萝
rockmellons
青柠
让我们分解一下：

awk是我们正在运行的程序。
'{print $ 2}'是要采取的行动。我们将它用单引号括起来，这样就不会用bash解释任何字符的特殊含义。大括号（{}）表明这是一个动作。可以在这些条件之外设置条件，并根据条件进行多个操作。print告诉awk打印东西，$ 2表示第二列。
mysampledata.txt是要处理的文件。
现在假设我们要打印订单，但仅在订单大于10时才打印。我们还希望稍微重新格式化输出。

awk'$ 3> 10 {print $ 1“ - ”$ 2“：”$ 3}'mysampledata.txt
弗雷德 - 苹果：20
马克 - watermellons：12
苏西 - 橘子：12
马克 - 葡萄：39
Betty - limes：14
让我们分解一下：

3美元> 10是一个条件。我们说要执行以下操作
对于操作，我们可以包含多个列和我们想要用双引号括起来打印的其他文本（“）。
安全复制（scp）
Scp是一种在不同机器之间复制文件的快速，简便和安全的方法。它是SSH（Secure SHell）工具套件的一部分。有了它，你可以将文件复制到本地计算机和远程计算机。

要将本地文件复制到远程计算机：

scp ./myfile.jpg username@192.183.243.10：/home/ryan/myfile.jpg
无法建立主机'192.183.243.10'的真实性。
你确定要继续连接（是/否）是
警告：永久性地将“192.183.243.10”添加到已知主机列表中。
密码：
myfile.jpg 100％37KB 4.5KB / s 00:03
让我们分解一下：

第1行 - 第一个参数是源。这是一个本地文件，因此我们提供一个路径（可以是绝对路径或相对路径）。在那之后，目的地。这里的目标是远程服务器。它的格式为username @ server-address：path-to-location
第2 - 3行 - 第一次连接到远程计算机时，它将提供此消息。你需要输入“是”（而不是“y”）。
第5行 - 它会询问你的密码。当你在光标中键入密码时将不会移动。这是一种安全机制，因此人们无法分辨你的密码中有多少个字母。
第6行 - 此行将在文件复制期间更新，以便让你知道它的进度。
反过来说：

scp username@192.183.243.10：/home/ryan/myfilex.jpg ./myfiley.jpg
密码：
myfiley.jpg 100％89KB 4.2KB / s 00:12
可以使用通配符一次复制多个文件。如果通配符不实用，那么使用Tar（上面）将多个文件压缩成单个文件也是一种很好的方法。

还有其他工具可用于在诸如FTP之类的机器之间复制文件。这些通常比scp强大得多，但结果使用起来更复杂。如果你只想复制少量文件，那么scp可能是最简单的方法。

