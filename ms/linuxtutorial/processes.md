# 进程管理

Linux 一般来说是一个相当稳定的系统。有时，事情确实会出错，有时我们也希望调整系统的运行以更好地满足我们的需求。在本节中，我们将简要介绍如何管理 Linux 系统上的程序或进程。

## 那他们是什么？

程序是一系列指令，告诉计算机该做什么。当我们运行程序时，这些指令被复制到内存中，并为变量和管理其执行所需的其他东西分配空间。这个正在运行的程序实例称为进程，它是我们管理的进程。

## 目前正在运行什么？

与大多数现代操作系统一样，Linux 是一个多任务操作系统。这意味着许多进程可以同时运行。除了我们正在运行的进程外，系统上还可能有其他用户运行东西，操作系统本身通常也会运行各种进程，用于管理所有内容。如果我们想获得系统当前正在发生的事情的快照，我们可以使用名为 top 的程序。

```bash

```

下面是运行此程序时应该看到的简化版本。

```bash

```

让我们分解一下：

第 2 行任务只是进程的另一个名称。在任何给定时间，在你的系统上运行相当多的进程是很典型的。其中大多数将是系统进程。他们中的许多人通常会睡觉。还行吧。它只是意味着他们正在等待特定事件发生，然后他们将采取行动。
第 3 行这是工作存储器（RAM）的细分。如果使用了大量内存，请不要担心。Linux 将最近使用的程序保存在内存中，以便在再次运行时加快性能。如果另一个进程需要该内存，则可以轻松清除它们以适应这种情况。
第 4 行这是系统上虚拟内存的细分。如果正在使用大量此类，你可能需要考虑增加它的大小。对于大多数具有大量 RAM 的现代系统的人来说，这里不应该遇到任何问题。
第 6-10 行最后是系统上资源最密集的进程列表（按资源使用顺序）。此列表将实时更新，因此有必要了解你的系统上发生的情况。要考虑的两个重要列是内存和 CPU 使用情况。如果在一段时间内某个特定进程中的任何一个都很高，那么可能值得研究为什么会这样。USP 列显示谁拥有该进程，PID 列标识进程的进程 ID，它是唯一的标识符那个过程。
Top 将为你提供系统的实时视图，并仅显示适合屏幕的进程数。另一个查看进程的程序称为 ps，它代表进程。在它的正常使用中，它将向你显示当前终端中运行的进程（通常不是很多）。如果我们添加参数 aux，那么它将显示一个完整的系统视图，这会更有帮助。

```bash
ps [aux]

```

它确实提供了相当多的输出，因此人们通常将输出传递给 grep 以过滤掉它们之后的数据。我们将在下一位看到一个这样的例子。

## 杀死一个崩溃的进程

它不会经常发生，但是当一个程序崩溃时，它可能会非常烦人。假设我们的浏览器已经运行，突然之间就锁定了。你尝试关闭窗口但没有任何反应，它已经完全没有反应。不用担心，我们可以轻松杀死 Firefox，然后重新打开它。首先，我们需要确定进程 ID。

```bash

```

它是进程所有者旁边的数字，即 PID（进程 ID）。我们将使用它来确定要杀死的进程。为此，我们使用一个名为 kill 的程序。

```bash
kill [signal] <PID>

```

有时你很幸运，只是正常运行 kill 会让进程停止并退出。当你这样做时，kill 会将默认信号（1）发送到进程，这有效地要求进程退出。我们总是首先尝试这个选项，因为干净的戒烟是最好的选择。但有时这不起作用。在上面的例子中，我们再次运行 ps 并看到该进程仍在运行。不用担心，我们可以再次杀死，但这次提供了 9 的信号，这实际意味着，用大锤进入并确保过程完好无损。

```bash

```

普通用户可能只会杀死他们所有者的进程。系统上的 root 用户可能会杀死任何进程。

## 前景和后台工作

你可能不需要对前台工作和后台工作做太多的工作，但是对于那些罕见的场合来说，值得了解它们。当我们正常运行程序时（就像我们到目前为止一样），它们在前台运行。他们中的大多数也在几分之一秒内完成。也许我们希望开始一个需要一点时间的过程，并且很乐意在没有我们干预的情况下做这件事（处理一个非常大的文本文件或编译一个程序）。我们可以做的是在后台运行程序，然后我们可以继续工作。我们将通过一个名为 sleep 的程序来证明这一点。所有睡眠都会等待一定时间，然后退出。我们还可以使用一个名为 jobs 的程序 列出了当前为我们运行的后台作业。

```bash

```

```bash

```

如果你自己运行上面的例子，你会发现终端等了 5 秒才再次提示你。现在，如果我们运行相同的命令，而是在命令的末尾添加一个与号（＆），那么我们告诉终端在后台运行此过程。

这次你会注意到它为进程分配了一个工号，并告诉我们这个数字是什么，并立即给我们提示。我们可以在流程在后台运行时继续工作。如果你等待 5 秒左右然后按 ENTER 键，你将看到一条消息，告诉你作业已完成。

我们也可以在前台和后台之间移动工作。如果按 CTRL + z，则当前运行的前台进程将暂停并移至后台。然后我们可以使用一个名为 fg 的程序代表前台，将后台进程带入前台。

```bash
fg <工作号码>
```

```bash

```

>CTRL + z 在 Windows 中使用，但用于运行撤消命令。来自 Windows 世界的人不小心碰到关键组合（例如特别是在编辑器 VI 中）并且想知道为什么他们的程序只是消失并且提示返回了，这并不罕见。如果你这样做，请不要担心，你可以使用作业来识别它已分配给哪个作业，然后 fg 将其恢复并继续工作。

## 摘要

### 学到什么

最佳
查看有关系统上运行的进程的实时数据。
PS
获取系统上运行的进程列表。
杀
结束进程的运行。
工作
显示在后台运行的当前作业列表。
FG
将后台进程移动到前台。
ctrl + z
暂停当前​​前台进程并将其移至后台。

### 重要概念

控制
我们对程序的运行有很大的控制权。

## 活动

时间有点乐趣：

首先，在桌面上启动一些程序。然后使用ps来识别他们的PID并杀死它们。
现在看看你是否可以这样做，但首先切换到另一个虚拟控制台。
最后，使用命令sleep和前景与后台之间的移动过程。
